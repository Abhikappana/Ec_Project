
<%- include('./partials/navbar.ejs') %>

    <body>
        <!-- Section: Design Block -->
        <section class="background-radial-gradient overflow-hidden">
            <div class="container px-4 py-5 px-md-5 text-center text-lg-start my-5">
                <div class="row gx-lg-5 align-items-center mb-">
                    <div class="col-lg-6 text-decoration: none;mb-5 mb-lg-0" style="z-index: 10">
                        <h1 class="my-5 display-5 fw-bold ls-tight" style="color: hsl(218, 81%, 95%)">
                            The best offer <br />
                            <span style="color: hsl(218, 81%, 75%)">for your business</span>
                        </h1>
                        <p class="mb-4 opacity-70" style="color: hsl(218, 81%, 85%)">
                            Lorem ipsum dolor, sit amet consectetur adipisicing elit.
                            Temporibus, expedita iusto veniam atque, magni tempora mollitia
                            dolorum consequatur nulla, neque debitis eos reprehenderit quasi
                            ab ipsum nisi dolorem modi. Quos?
                        </p>
                    </div>
                    <div class="col-12 col-md-6 col-xl-5">
                        <div class="card border-0 rounded-4">
                            <div class="card-body p-3 p-md-4 p-xl-5">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="mb-4">
                                            <h3>Verify Your OTP</h3>
                                        </div>
                                    </div>
                                </div>
								<div class="row">
                                    <div class="col-12">
                                        <div class="mb-4">
                                            <p class="error-message">Otp is sent to <a href=""><%= email %></a></p>
                                        </div>
                                    </div>
                                </div>
                                <form action="/verifyOTP" method="post">
                                    <div class="row gy-3 overflow-hidden">
                                        <div class="col-12">
                                            <div class="form-floating mb-3">
                                                <input type="number" class="form-control" name="otp" id="otp"
                                                    placeholder="OTP" required>
                                                <label for="otp" class="form-label">OTP</label>
                                            </div>
                                        </div>
										<div class="row">
											<p class="error-message" style="color: red;"><%= error %></p>
										</div>
                                        <div class="col-12">
                                            <div class="d-grid">
                                                <button class="btn btn-primary btn-lg" type="submit">Verify</button>
                                            </div>
                                        </div>
										<div class="d-flex justify-content-between align-items-center">
											<div class="col-8 mt-3">
												<p id="countdown">Waiting for OTP...</p>
											</div>
											<div>
												<button id="resendButton" onclick="resendOTP()" class="btn btn-primary" disabled>Resend OTP</button>
											</div>
										</div>
                                    </div>
                                </form>
                               
                            </div>
                        </div>
                    </div>



                </div>
            </div>
        </section>
        <%- include('./partials/footer.ejs') %>


		<script>

			/*    OTP VALIDATION     */
			var otpError = document.getElementById("otp-error");
			var submitOTPError = document.getElementById("submitOTP-error");
			var invalidOTP = document.getElementById("invalidotp");
			invalidOTP.style.display = 'block';
			setTimeout(() => {
				invalidOTP.style.display = "none"
			}, 2000)
	
			function validateOTP() {
				var otpname = document.getElementById("otp").value;
				if (otpname.length == 0) {
					otpError.innerHTML = "Please enter OTP";
					return false;
	
				} else if (!otpname.match(/^[0-9]{4,}$/)) {
					otpError.innerHTML = "Only numbers allowed";
					return false;
				}
	
				else if (otpname.length != 6) {
					otpError.innerHTML = "6 digit OTP";
					return false;
				}
	
				otpError.innerHTML = "valid";
				return true;
			}
	
			function validateOTPForm() {
				if (!validateOTP()) {
					submitOTPError.style.display = "block";
					submitOTPError.innerHTML = "OTP required";
					setTimeout(() => {
						submitOTPError.style.display = "none";
					}, 2000);
					return false;
				}
	
			}
	
	
		</script>
	
		<script>
			let countdownValue = 60; // Countdown duration in seconds
			let countdownInterval;
	
			function startCountdown() {
				countdownInterval = setInterval(function () {
					if (countdownValue > 0) {
						countdownValue--;
						document.getElementById('countdown').innerText = `Resend OTP in ${countdownValue} seconds`;
					} else {
						clearInterval(countdownInterval);
						document.getElementById('countdown').innerText = 'Waiting for OTP...';
						document.getElementById('resendButton').disabled = false;
					}
				}, 1000);
			}
	
			function resendOTP() {
				// Simulate OTP resend logic
				// Replace this with your actual OTP resend logic   
	
				window.location.href = "/regResOTP/<%=email %>"
	
				// Disable the resend button and start the countdown
				document.getElementById('resendButton').disabled = true;
				countdownValue = 60; // Reset countdown value
				startCountdown();
			}
	
			// Start the initial countdown
			startCountdown();
		</script>
    </body>