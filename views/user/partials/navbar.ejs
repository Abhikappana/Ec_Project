<!DOCTYPE html>
<html lang="en">

<head>
	<title>A&B</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/bootstrap/css/bootstrap.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/fonts/iconic/css/material-design-iconic-font.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/fonts/linearicons-v1.0.0/icon-font.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/animate/animate.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/css-hamburgers/hamburgers.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/animsition/css/animsition.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/select2/select2.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/daterangepicker/daterangepicker.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/slick/slick.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/MagnificPopup/magnific-popup.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/vendor/perfect-scrollbar/perfect-scrollbar.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/css/util.css">
	<link rel="stylesheet" type="text/css" href="/css/main.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-<new-hash>" crossorigin="anonymous">
	
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<!--===============================================================================================-->
</head>

<body class="animsition">

	<!-- Header -->
	<header>
		<!-- Header desktop -->
		<div class="container-menu-desktop">
			<!-- Topbar -->
			<div class="top-bar">
				<div class="content-topbar flex-sb-m h-full container">
					<div class="left-top-bar">
						Free shipping for standard order over $100
					</div>

					<div class="right-top-bar flex-w h-full">
						<a href="#" class="flex-c-m trans-04 p-lr-25">
							Help & FAQs
						</a>
						<% if (isUser) { %>
							<a href="/userdetails" class="flex-c-m trans-04 p-lr-25">
								My Account
							</a>

							<a href="/logout" class="flex-c-m trans-04 p-lr-25">
								Logout
							</a>

							<% } else { %>
								<a href="/login" class="flex-c-m trans-04 p-lr-25">
									Login
								</a>

								<a href="/signup" class="flex-c-m trans-04 p-lr-25">
									Register
								</a>
								<% } %>
					</div>
				</div>
			</div>

			<div class="wrap-menu-desktop">
				<nav class="limiter-menu-desktop container">

					<!-- Logo desktop -->
					<div class="logo">
						<a href="/">

							A&B Store

						</a>
					</div>


					<!-- Menu desktop -->
					<div class="menu-desktop">
						<ul class="main-menu">
							<li class="active-menu">
								<a href="/">Home</a>
							</li>

							<li>
								<a href="/product">Shop</a>
							</li>

							<li class="label1" data-label1="hot">
								<a href="/shoping-cart">Features</a>
							</li>


						</ul>
					</div>

					<!-- Icon header -->
					<div class="wrap-icon-header flex-w flex-r-m">



						<% if (isUser) { %>

							<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 ">

								<input type="text" id="searchInput" class="stext-103 cl2 size-102 bg8 bor13 p-lr-20"
									placeholder="Search..." onkeyup="handleSearch(event)">

							</div>

							<button id="update-wishlist-btn"
								class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10  js-show-wishlist">
								<i class="zmdi zmdi-favorite-outline"></i>

							</button>


							<a href="/shopingcart" class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11  ">
								<i class="zmdi zmdi-shopping-cart"></i>
							</a>
							<% } else { %>
								<a href="/login" class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11">

									<i class="zmdi zmdi-favorite-outline"></i>
								</a>

								<a href="/login" class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11">
									<i class="zmdi zmdi-shopping-cart"></i>
								</a>
								<% } %>

					</div>
				</nav>
			</div>
		</div>

		<!-- Header Mobile -->
		<div class="wrap-header-mobile">
			<!-- Logo moblie -->
			<div class="logo-mobile">
				<a href="/">

					A&B

				</a>
			</div>

			<!-- Icon header -->
			<div class="wrap-icon-header flex-w flex-r-m m-r-15">

				<% if (isUser) { %>
					<div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11">

						<input type="text" id="searchInput" class="stext-103 cl2 size-101 bg8 bor13 p-lr-10"
							placeholder="Search products..." onkeyup="handleSearch(event)">

					</div>
					<% if (wishlist) {%>
						<button onclick="updateWishlistSidebar()"
							class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10  js-show-wishlist">
							<i class="zmdi zmdi-favorite-outline"></i>

						</button>
						<% } else { %>
							<button onclick="EmptyWishlistSidebar('Removed', 'Product removed from wishlist!')"
								class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10  js-show-wishlist">
								<i class="zmdi zmdi-favorite-outline"></i>

							</button>

							<% } %>
								<a href="/shopingcart"
									class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10  ">

									<i class="zmdi zmdi-shopping-cart"></i>
								</a>
								<% } else { %>
									<a href="/login"
										class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10">
										<i class="zmdi zmdi-favorite-outline"></i>
									</a>

									<a href="/login"
										class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 ">
										<i class="zmdi zmdi-shopping-cart"></i>
									</a>
									<% } %>
			</div>

			<!-- Button show menu -->
			<div class="btn-show-menu-mobile hamburger hamburger--squeeze">
				<span class="hamburger-box">
					<span class="hamburger-inner"></span>
				</span>
			</div>
		</div>


		<!-- Menu Mobile -->
		<div class="menu-mobile">


			<ul class="main-menu-m">
				<li>
					<a href="/">Home</a>
				</li>

				<li>
					<a href="/product">Shop</a>
				</li>

				<li>
					<a href="/shoping-cart" class="label1 rs1" data-label1="hot">Features</a>
				</li>

				<% if (isUser) { %>
					<li>
						<a href="/">Settings</a>
						<ul class="sub-menu-m">
							<li><a href="/userdetails">Account</a></li>
							<li><a href="/logout">logOut</a></li>
						</ul>
						<span class="arrow-main-menu-m">
							<i class="fa fa-angle-right" aria-hidden="true"></i>
						</span>

					</li>
					<% } else { %>
						<li>
							<a href="/login">Sign In</a>
						</li>

						<li>
							<a href="/signup">Register</a>
						</li>
						<% } %>
			</ul>
		</div>

		<!-- Modal Search -->

	</header>

	<!-- Wishlist -->
	<% if (isUser) { %>
		<%- include('./Wishlist.ejs') %>

			<% } %>

				<script>
					function handleSearch(event) {
						if (event.key === 'Enter') {
							const searchQuery = event.target.value;
							let url;

							if (window.location.pathname === '/product') {
								// If already on the product page, just update the search parameters
								url = new URL(window.location.href);
								url.searchParams.set('search', searchQuery);
								url.searchParams.set('page', 1); // Reset to the first page for new search
							} else {
								// If on a different page (e.g., home page), redirect to the product page with search parameters
								url = new URL(window.location.origin + '/product');
								url.searchParams.set('search', searchQuery);
								url.searchParams.set('page', 1); // Start from the first page
							}

							window.location.href = url.toString();
						}
					}
				</script>